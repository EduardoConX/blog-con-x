---
import ArrowRightIcon from "@/icons/ArrowRightIcon.astro";
import Layout from "../layouts/Layout.astro";
import PostCard from "@/components/PostCard.astro";
import { getCollection } from "astro:content";
const posts = await getCollection("posts");
posts.sort((a, b) => Number(b.data.date) - Number(a.data.date));
const mostRecent = posts.slice(0, 6);

const categories = await getCollection("categories");
---

<Layout
  title="Programming Insights & Tutorials"
  description="Dive deep into algorithms, data structures, and modern programming concepts with our comprehensive guides and tutorials."
>
  <main class="lg:col-span-3">
    <section class="mb-12">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-2xl font-bold">Most Recent Posts</h3>
        <button
          class="px-3 h-8 border inline-flex items-center justify-center gap-1.5 hover:cursor-pointer hover:bg-accent rounded-md"
          >View All
          <ArrowRightIcon />
        </button>
      </div>

      <div class="grid gap-6 md:grid-cols-2">
        {
          mostRecent.map((post) => {
            const category = categories.find(
              (cat) => cat.id === post.data.category.id
            );
            return <PostCard post={post} category={category!} />;
          })
        }
      </div>
    </section>
  </main>
</Layout>
